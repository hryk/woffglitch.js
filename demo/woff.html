<!doctype html>
<html>
  <head>
    <title>WOFFGlitch Test</title>
 </head>
 <body>
  <h1 class="glitch">Webfont Glitch</h1>
  <a href="#" id="webfont_download">Download Glitched Font</a>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="js/libs/jquery-1.7.2.min.js"><\/script>')</script>
  <script src="../lib/EventEmitter.js"></script>
  <script src="../lib/base64.js"></script>
  <script src="../lib/rawinflate.js"></script>
  <script src="../lib/rawdeflate.js"></script>
  <script src="../src/woff.js"></script>
  <script src="../src/woffglitch.js"></script>
  <script src="../src/binutil.js"></script>
  <script type="text/javascript">
    var wg = new WOFFGlitch('//webfontcssproxy.herokuapp.com/css');
    wg.load('Audiowide', function(glitched_woff, family_name, mime_type){
      // TODO: Fix download link generation.
      // var font_file = new Blob([glitched_woff], {type: "application/octet-binary"});
      // var blobURL = window.URL.createObjectURL(font_file);
      // $('#webfont_download')[0].download = 'glitched.woff';
      // $('#webfont_download').attr('href', blobURL);
      // $('#webfont_download')[0].dataset.downloadurl = ["application/octet-binary", 'glitch.woff', blobURL].join(":");
    });
  </script>
 </body>
</html>
